<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Dota 2 Counter Picker and advantage browser based on DotaBuff.">
    <title>Counter Picker based on DotaBuff</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script>
    <script src="cs_db.json"></script>
    <script src="cs_d2pt.json"></script>
    <script src="dotabuffcp.js"></script>
    <style type="text/css">

       html, body {
         height: 100%;
       }

      body {
        padding: 20px 0 0 0;
        overflow: hidden;
      }

       img {
         border: 1px solid #aaa;
         box-shadow: 2px 2px 8px 0px rgba(50, 50, 50, 0.38);
       }

       .navbar {
         margin-bottom: 20px;
       }

       div.main-wrapper {
         width: 967px !important;
         position: relative;
         height: 100%;
       }

       #main-container {
         position: absolute;
         bottom: 0;
         top: 70px;
         width: 967px !important;
         padding-right: 30px;
         overflow: visible;
       }

       div.main-col {
         position: absolute;
         bottom: 0;
         top: 0;
       }

      div.second-col {
        position: absolute;
        bottom: 0;
        top: 0;
        right: 30px;
        overflow: visible;
      }

       #hero-list {
         position: absolute;
         top: 50px;
         bottom: 0;
         overflow-y: auto;
         left: 15px;
         right: 20px;
       }

       #hero-list,
       #hero-list li {
         list-style-type: none;
         margin: 0;
         padding: 0;
       }

       #hero-list li {
         margin-bottom: 10px;
         cursor: pointer;
       }

       #hero-list li img {
         max-width: 100px;
         margin-right: 10px;
       }

       form.hero-search-form {
         margin-bottom: 10px;
       }

       div.lineup img {
         max-width: 100px;
       }

       div.lineup div.col-md-2 {
         cursor: pointer;
       }
      .stats-label { font-size: 10px; line-height: 1; margin-bottom: 2px; font-weight: 600; white-space: nowrap; }
      .stats-label .change-label { color: #308DD1; }
       div.red {

       }
       div.lineup-title {
         margin: 0 20px 0 20px;
         text-align: center;
       }

      #counters {
        position: absolute;
        top: 392px;
        bottom: 0;
        left: 30px;
        right: 20px;
        overflow-y: auto;
        overflow-x: hidden;
        padding-right: 20px;
      }
      #counters-scroll { height: auto; overflow: visible; padding-right: 0; margin-left: 0; margin-right: 0; }

      #counters div.row img {
        max-width: 90px;
      }
      /* Shift picked heroes and their stats slightly left */
      .lineup, #score1, #score2, #total { transform: translateX(-16px); }
      /* Remove gutters between the four counter tables */
      #counters-scroll .col-md-3,
      #counters-scroll .col-xs-3 { padding-left: 0; padding-right: 0; }
      /* Use flex to prevent wrapping and add controlled gap */
      #counters-scroll { display: flex; flex-wrap: nowrap; gap: 12px; }
      #counters-scroll > .col-md-3,
      #counters-scroll > .col-xs-3 { float: none; flex: 1 1 0; min-width: 0; }
      /* Enforce explicit left-to-right order: Best-Worst | Best-Worst */
      #counters-scroll > .col-md-3:nth-child(1),
      #counters-scroll > .col-xs-3:nth-child(1) { order: 1; }
      #counters-scroll > .col-md-3:nth-child(2),
      #counters-scroll > .col-xs-3:nth-child(2) { order: 2; }
      #counters-scroll > .col-md-3:nth-child(3),
      #counters-scroll > .col-xs-3:nth-child(3) { order: 3; }
      #counters-scroll > .col-md-3:nth-child(4),
      #counters-scroll > .col-xs-3:nth-child(4) { order: 4; }
      /* Counter tables visual alignment improvements */
      #counters-scroll .table > tbody > tr {
        height: 40px;
      }
      #counters-scroll .table > tbody > tr > td:nth-child(1) {
        width: 44px;
        vertical-align: middle;
      }
      #counters-scroll .table > tbody > tr > td:nth-child(2) {
        width: auto;
        text-overflow: ellipsis;
        overflow: hidden;
        white-space: nowrap;
        vertical-align: middle;
        padding-left: 6px;
      }
      #counters-scroll .table > tbody > tr > td:nth-child(3) {
        text-align: right;
        font-variant-numeric: tabular-nums;
        letter-spacing: 0.2px;
        vertical-align: middle;
      }
      /* Center Best/Worst labels above their columns aligned with counters */
      .pick-labels {
        display: flex;
        gap: 12px;
        margin: 0 0 8px 0; /* align within #counters container */
        font-weight: 400;
        font-family: Arial, Helvetica, sans-serif;
      }
      .pick-labels > div { flex: 1 1 0; text-align: center; }
      #counters-scroll .table tbody tr:hover {
        background: rgba(48, 141, 209, 0.08);
      }
      
      #best-picks-bottom td,
      #worse-picks-bottom td,
      #best-picks-top td,
      #worse-picks-top td {
        padding: 1px;
        font-size: 8px;
        word-wrap: break-word;
        line-height: 1.1;
        white-space: nowrap;
        overflow: hidden;
      }
      
      #best-picks-bottom tr,
      #worse-picks-bottom tr,
      #best-picks-top tr,
      #worse-picks-top tr {
        height: 40px;
      }
      
      #best-picks-bottom img,
      #worse-picks-bottom img,
      #best-picks-top img,
      #worse-picks-top img {
        max-width: 44px; /* matches first column width */
        max-height: 36px; /* fits 40px row height with padding */
        width: auto !important;
        height: auto !important;
        display: block;
      }
      /* Stronger selector to ensure natural aspect ratio is preserved */
      #counters-scroll td:nth-child(1) img { width: auto !important; height: auto !important; max-width: 44px; max-height: 36px; }
      
      #counters-scroll .table {
        margin-bottom: 0;
        table-layout: fixed;
        width: 100%;
      }
      
      #counters-scroll .table > tbody > tr > td {
        padding: 2px 4px;
      }
      
      #counters-scroll .table > tbody > tr > td:nth-child(1) {
        width: 44px;
      }
      
      #counters-scroll .table > tbody > tr > td:nth-child(2) {
        width: 45%;
      }
      
      #counters-scroll .table > tbody > tr > td:nth-child(3) {
        width: 40%;
      }
      /* Remove previous separator to rely on flex gap */
      #counters-scroll > .col-md-3:nth-child(3),
      #counters-scroll > .col-xs-3:nth-child(3) { border-left: 0; padding-left: 0; }
      #total .alert { font-size: 12px; padding: 4px 6px; }
      #total .lane-bubble { font-size: 12px !important; padding: 4px 6px !important; }
      /* Remove global alert shrink to keep original component sizes */

      div.pick-title {
        text-align: center;
        padding-top: 8px;
        font-size: 1.2em;
        font-family: Arial, Helvetica, sans-serif;
        margin-top: 25px;
        position: relative;
        z-index: 1;
        background: #fff;
        margin-bottom: 0;
      }

       div.addthis_toolbox {
         margin-top: 10px;
       }

       div.faq {
         padding: 0 200px 0 200px;
       }

       div.reset-all-div {
         padding-bottom: 20px;
         text-align: center;
       }

       #reset-all,
       #counters,
       div.pick-title {
         display: none;
       }

    </style>
  </head>
  <body>

  <div class="container main-wrapper">


    <!-- lets put a navbar -->

    <div class="navbar navbar-default" role="navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">DotaBuff CP</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="https://github.com/onur/DotaBuffCP">GitHub</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="#" id="version"></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div><!--/.container-fluid -->
    </div>

  <div id="main-container"></div>

  </div><!-- main wrapper -->

  <script type="text/template" id="main-view-template">

    <div class="row">
      <div class="col-md-4 col-xs-4 main-col">

        <form class="form-inline hero-search-form" role="form">
          <div class="form-group">
            <label class="sr-only" for="hero-search">Hero Name</label>
            <input type="text" class="form-control" id="hero-search" placeholder="Search" autocomplete="off">
          </div>
          <button id="hero-search-reset" type="reset" class="btn btn-default"><span class="glyphicon glyphicon-remove"></span></button>
        </form>

        <ul id="hero-list"></ul>
      </div>
      <div class="col-md-8 col-xs-8 second-col">
        <div class="row alert alert-info row lineup-title">
          <p>Choose enemy heroes from the list on the left</p>
          <p>You can search heroes, and add them quickly by pressing enter</p>
        </div>
        <div class="row reset-all-div">
          <a id="reset-all" class="btn btn-default">Reset all</a>
        </div>
        <div class="row lineup">
          <div class="col-md-1 col-xs-1"></div>
          <div class="col-md-2 col-xs-2" id="hero-0"></div>
          <div class="col-md-2 col-xs-2" id="hero-1"></div>
          <div class="col-md-2 col-xs-2" id="hero-2"></div>
          <div class="col-md-2 col-xs-2" id="hero-3"></div>
          <div class="col-md-2 col-xs-2" id="hero-4"></div>
          <div class="col-md-1 col-xs-1"></div>          
        </div>
        <div class="row lineup" id="score1"></div>
        <div class="row lineup" id="copyheroes">
          <div class="col-md-1 col-xs-1"></div>
          <div class="col-md-2 col-xs-2" id="hero-5"></div>
          <div class="col-md-2 col-xs-2" id="hero-6"></div>
          <div class="col-md-2 col-xs-2" id="hero-7"></div>
          <div class="col-md-2 col-xs-2" id="hero-8"></div>
          <div class="col-md-2 col-xs-2" id="hero-9"></div>
          <div class="col-md-1 col-xs-1"></div>                    
        </div>                
        <div class="row lineup" id="score2" style="margin-top: 0;"></div>
        <div class="row" style="height: 18px;" id="total"></div>
        <div class="row pick-title">
          <div class="row">
            <div class="col-md-12 col-xs-12" style="text-align:center; font-weight:400">Advantages</div>
          </div>
        </div>
        <div id="counters" class="row">
          <div id="counters-scroll" class="row">
            <div class="col-md-3 col-xs-3">
              <table class="table table-striped table-condensed">
                <tbody id="best-picks-bottom"></tbody>
              </table>
            </div>
            <div class="col-md-3 col-xs-3">
              <table class="table table-striped table-condensed">
                <tbody id="worse-picks-bottom"></tbody>
              </table>
            </div>
            <div class="col-md-3 col-xs-3">
              <table class="table table-striped table-condensed">
                <tbody id="best-picks-top"></tbody>
              </table>
            </div>
            <div class="col-md-3 col-xs-3">
              <table class="table table-striped table-condensed">
                <tbody id="worse-picks-top"></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

  </script>

  <script type="text/template" id="counter-template">

        <tr class="<%
          advantage = advantage * -1;
          if (advantage > 10) { %>success<% }
          else if (advantage > 7.5) { %>info<% }
          else if (advantage > 5) { %>warning<% }
          else if (advantage < 0) { %>danger<% }
        %>">
          <td><img src="<%= hero_bg %>"></td>
          <td><%= hero_name %></td>
          <td><span class="advantage-val"><%= advantage %>%</span><br><small class="winrate-val"><%= win_rate %>%</small></td>
        </tr>

  </script>

  


  

  </body>
</html>

